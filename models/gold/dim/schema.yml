version: 2

models:
  - name: dim_product_categories
    description: "Historical dimension for product categories with SCD Type 2 applied to category name."
    columns:
      - name: category_sk
        description: "Surrogate key for the category dimension. Generated from category_id and category_name."
        data_tests:
          - not_null
          - unique

      - name: category_id
        description: "Business key representing the category ID from the source system."
        data_tests:
          - not_null

      - name: category_name
        description: "Name of the product category. SCD Type 2."
        data_tests:
          - not_null

      - name: category_description
        description: "Description of the category. SCD Type 1."

      - name: last_modified
        description: "Last modified timestamp from Bronze layer."
        data_tests:
          - not_null

      - name: silver_loaded_at
        description: "Timestamp when the record was loaded into the Silver layer."
        data_tests:
          - not_null

      - name: gold_loaded_at
        description: "Timestamp when the record was loaded into the Gold layer."
        data_tests:
          - not_null

      - name: valid_from
        description: "Start of the validity period for this version of the category record."
        data_tests:
          - not_null

      - name: valid_to
        description: "End of the validity period for this version of the category record."
        data_tests:
          - not_null

      - name: is_current
        description: "Flag indicating if the record version is the current one."
        data_tests:
          - not_null


  - name: dim_product_suppliers
    description: "Historical dimension for product suppliers with SCD Type 2 applied to geographic attributes."
    columns:
      - name: supplier_sk
        description: "Surrogate key for the supplier dimension. Generated from supplier_id, supplier_city, supplier_region, and supplier_country."
        data_tests:
          - not_null
          - unique

      - name: supplier_id
        description: "Business key representing the supplier ID from the source system."
        data_tests:
          - not_null

      - name: supplier_company_name
        description: "Company name of the supplier. SCD Type 1."
        data_tests:
          - not_null

      - name: supplier_contact_name
        description: "Name of the contact person at the supplier company. SCD Type 1."
        data_tests:
          - not_null

      - name: supplier_contact_title
        description: "Title of the contact person at the supplier company. SCD Type 1."
        data_tests:
          - not_null

      - name: supplier_address
        description: "Address of the supplier. SCD Type 1."
        data_tests:
          - not_null

      - name: supplier_city
        description: "City where the supplier is located. SCD Type 2."
        data_tests:
          - not_null

      - name: supplier_region
        description: "Region where the supplier is located. SCD Type 2."
        data_tests:
          - not_null

      - name: supplier_postal_code
        description: "Postal code of the supplier. SCD Type 1."
        data_tests:
          - not_null

      - name: supplier_country
        description: "Country where the supplier is located. SCD Type 2."
        data_tests:
          - not_null

      - name: supplier_phone
        description: "Phone number of the supplier. SCD Type 1."
        data_tests:
          - not_null

      - name: supplier_fax
        description: "Fax number of the supplier. SCD Type 1."
        data_tests:
          - not_null

      - name: supplier_homepage
        description: "Homepage of the supplier. SCD Type 1."
        data_tests:
          - not_null

      - name: last_modified
        description: "Last modified timestamp from Bronze layer."
        data_tests:
          - not_null

      - name: silver_loaded_at
        description: "Timestamp when the record was loaded into the Silver layer."
        data_tests:
          - not_null

      - name: gold_loaded_at
        description: "Timestamp when the record was loaded into the Gold layer."
        data_tests:
          - not_null

      - name: valid_from
        description: "Start of the validity period for this version of the supplier record."
        data_tests:
          - not_null

      - name: valid_to
        description: "End of the validity period for this version of the supplier record."
        data_tests:
          - not_null

      - name: is_current
        description: "Flag indicating if the record version is the current one."
        data_tests:
          - not_null


  - name: dim_products
    description: "Historical dimension for products with SCD Type 2 control. Tracks changes in unit price and discontinued status over time."
    columns:
      - name: product_sk
        description: "Surrogate key generated from SCD2 columns (unit_price, discontinued)."
        data_tests:
          - not_null
          - unique

      - name: product_id
        description: "Business key from the source system."
        data_tests:
          - not_null

      - name: product_name
        description: "Product name. SCD Type 1."
        data_tests:
          - not_null

      - name: quantity_per_unit
        description: "Packaging or quantity description. SCD Type 1."
        data_tests:
          - not_null

      - name: unit_price
        description: "Unit price of the product. SCD Type 2."
        data_tests:
          - not_null

      - name: units_in_stock
        description: "Stock available. SCD Type 1."
        data_tests:
          - not_null

      - name: units_on_order
        description: "Units on order. SCD Type 1."
        data_tests:
          - not_null

      - name: reorder_level
        description: "Minimum stock level before reorder. SCD Type 1."
        data_tests:
          - not_null

      - name: discontinued
        description: "Whether the product is discontinued (1) or not (0). SCD Type 2."
        data_tests:
          - not_null

      - name: last_modified
        description: "Last modified timestamp from Bronze layer."
        data_tests:
          - not_null

      - name: silver_loaded_at
        description: "Timestamp of when the record was loaded into the Silver layer."
        data_tests:
          - not_null

      - name: gold_loaded_at
        description: "Timestamp of when the record was loaded into the Gold layer."
        data_tests:
          - not_null

      - name: valid_from
        description: "Start date of the version validity period."
        data_tests:
          - not_null

      - name: valid_to
        description: "End date of the version validity period."
        data_tests:
          - not_null

      - name: is_current
        description: "Flag to identify if the version is the current one."
        data_tests:
          - not_null


  - name: dim_customers
    description: "Historical dimension for customers with SCD Type 2 tracking for city, region, and country."
    columns:
      - name: customer_sk
        description: "Surrogate key for the customer dimension."
        data_tests:
          - not_null
          - unique

      - name: customer_id
        description: "Business key identifying the customer."
        data_tests:
          - not_null

      - name: customer_company_name
        description: "Company name of the customer. SCD Type 1."
        data_tests:
          - not_null

      - name: customer_contact_name
        description: "Contact name of the customer. SCD Type 1."
        data_tests:
          - not_null

      - name: customer_contact_title
        description: "Contact title of the customer. SCD Type 1."
        data_tests:
          - not_null

      - name: customer_address
        description: "Address of the customer. SCD Type 1."
        data_tests:
          - not_null

      - name: customer_city
        description: "City where the customer is located. SCD Type 2."
        data_tests:
          - not_null

      - name: customer_region
        description: "Region where the customer is located. SCD Type 2."
        data_tests:
          - not_null

      - name: customer_postal_code
        description: "Postal code of the customer. SCD Type 1."
        data_tests:
          - not_null

      - name: customer_country
        description: "Country where the customer is located. SCD Type 2."
        data_tests:
          - not_null

      - name: customer_phone
        description: "Phone number of the customer. SCD Type 1."
        data_tests:
          - not_null

      - name: customer_fax
        description: "Fax number of the customer. SCD Type 1."
        data_tests:
          - not_null

      - name: last_modified
        description: "Last modified timestamp from Bronze layer."
        data_tests:
          - not_null

      - name: silver_loaded_at
        description: "Timestamp when the record was loaded into the Silver layer."
        data_tests:
          - not_null

      - name: gold_loaded_at
        description: "Timestamp when the record was loaded into the Gold layer."
        data_tests:
          - not_null

      - name: valid_from
        description: "Start of the validity period for this version of the record."
        data_tests:
          - not_null

      - name: valid_to
        description: "End of the validity period for this version of the record."
        data_tests:
          - not_null

      - name: is_current
        description: "Flag indicating whether the record version is the current one."
        data_tests:
          - not_null


  - name: dim_shippers
    description: "Historical dimension for shippers with SCD Type 1 tracking."
    columns:
      - name: shipper_sk
        description: "Surrogate key for the shipper dimension."
        data_tests:
          - not_null
          - unique

      - name: shipper_id
        description: "Business key identifying the shipper."
        data_tests:
          - not_null

      - name: shipper_company_name
        description: "Company name of the shipper. SCD Type 1."
        data_tests:
          - not_null

      - name: shipper_phone
        description: "Phone number of the shipper. SCD Type 1."
        data_tests:
          - not_null

      - name: last_modified
        description: "Last modified timestamp from Bronze layer."
        data_tests:
          - not_null

      - name: silver_loaded_at
        description: "Timestamp when the record was loaded into the Silver layer."
        data_tests:
          - not_null

      - name: gold_loaded_at
        description: "Timestamp when the record was loaded into the Gold layer."
        data_tests:
          - not_null

      - name: valid_from
        description: "Start of the validity period for this version of the record."
        data_tests:
          - not_null

      - name: valid_to
        description: "End of the validity period for this version of the record."
        data_tests:
          - not_null

      - name: is_current
        description: "Flag indicating whether the record version is the current one."
        data_tests:
          - not_null


  - name: dim_employees
    description: "Historical dimension for employees with SCD Type 2 tracking for city, region, country, and reports_to."
    columns:
      - name: employee_sk
        description: "Surrogate key for the employee dimension."
        data_tests:
          - not_null
          - unique

      - name: employee_id
        description: "Business key identifying the employee."
        data_tests:
          - not_null

      - name: employee_last_name
        description: "Last name of the employee. SCD Type 1."
        data_tests:
          - not_null

      - name: employee_first_name
        description: "First name of the employee. SCD Type 1."
        data_tests:
          - not_null

      - name: employee_title
        description: "Job title of the employee. SCD Type 1."
        data_tests:
          - not_null

      - name: employee_title_of_courtesy
        description: "Courtesy title of the employee. SCD Type 1."
        data_tests:
          - not_null

      - name: employee_birth_date
        description: "Birth date of the employee. SCD Type 1."
        data_tests:
          - not_null

      - name: employee_hire_date
        description: "Hire date of the employee. SCD Type 1."
        data_tests:
          - not_null

      - name: employee_address
        description: "Street address of the employee. SCD Type 1."
        data_tests:
          - not_null

      - name: employee_city
        description: "City where the employee resides. SCD Type 2."
        data_tests:
          - not_null

      - name: employee_region
        description: "Region of residence. SCD Type 2."
        data_tests:
          - not_null

      - name: employee_postal_code
        description: "Postal code of the employee's address. SCD Type 1."
        data_tests:
          - not_null

      - name: employee_country
        description: "Country of residence. SCD Type 2."
        data_tests:
          - not_null

      - name: employee_home_phone
        description: "Home phone number. SCD Type 1."
        data_tests:
          - not_null

      - name: employee_extension
        description: "Phone extension. SCD Type 1."
        data_tests:
          - not_null

      - name: employee_notes
        description: "Additional notes about the employee. SCD Type 1."
        data_tests:
          - not_null

      - name: employee_reports_to
        description: "Manager of the employee (employee_id). SCD Type 2."
        data_tests:
          - not_null

      - name: employee_photo_path
        description: "Path to the employee's photo. SCD Type 1."
        data_tests:
          - not_null

      - name: last_modified
        description: "Last modified timestamp from Bronze layer."
        data_tests:
          - not_null

      - name: silver_loaded_at
        description: "Timestamp when the record was loaded into the Silver layer."
        data_tests:
          - not_null

      - name: gold_loaded_at
        description: "Timestamp when the record was loaded into the Gold layer."
        data_tests:
          - not_null

      - name: valid_from
        description: "Start of the validity period for this version of the record."
        data_tests:
          - not_null

      - name: valid_to
        description: "End of the validity period for this version of the record."
        data_tests:
          - not_null

      - name: is_current
        description: "Indicates whether the record is the most recent version."
        data_tests:
          - not_null
